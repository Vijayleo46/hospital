{%include 'shopheader.html'%}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Full Screen Chat</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    :root {
      --msger-bg: #fff;
      --border: 2px solid #ddd;
      --left-msg-bg: #ececec;
      --right-msg-bg: #579ffb;    
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      font-family: Arial, sans-serif;
      background: #f0f0f0;
    }

    .msger {
      display: flex;
      flex-direction: column;
      height: 100vh;
      width: 100vw;
      background: var(--msger-bg);
    }

    .msger-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      background: #eee;
      border-bottom: var(--border);
    }

    .msger-chat {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: #fafafa;
    }

    .msg {  
      display: flex;
      margin-bottom: 15px;
      align-items: flex-end;
    }

    .msg-img {
      width: 40px;
      height: 40px;
      background-size: cover;
      border-radius: 50%;
      margin-right: 10px;
    }

    .msg-bubble {
      max-width: 60%;
      padding: 10px 15px;
      border-radius: 15px;
      background: var(--left-msg-bg);
    }

    .right-msg {
      flex-direction: row-reverse;
    }

    .right-msg .msg-bubble {
      background: var(--right-msg-bg);
      color: white;
    }

    .right-msg .msg-img {
      margin-left: 10px;
      margin-right: 0;
    }

    .msg-info {
      display: flex;
      justify-content: space-between;
      font-size: 0.8em;
      margin-bottom: 5px;
    }

    .msger-input-area {
      display: flex;
      padding: 15px 20px;
      border-top: var(--border);
      background: #eee;
    }

    .msger-input {
      flex: 1;
      padding: 10px;
      font-size: 1em;
      border-radius: 20px;
      border: var(--border);
      resize: none;
    }

    .msger-send-btn {
      margin-left: 10px;
      padding: 10px 20px;
      border: none;
      background: #4caf50;
      color: white;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .msger-send-btn:hover {
      background: #45a049;
    }

    .msg-text {
      white-space: pre-wrap;
    }
  </style>
</head>

<body>
  <div class="msger">
    <header class="msger-header">
      <a href="/storehome"><img
          src="https://www.nicepng.com/png/detail/191-1910611_back-arrow-arrows-buttons-back-icon-png.png" width="30"
          alt="Back"></a>
      <h2><i class="fas fa-comment-alt"></i> CHAT</h2>
      <span><i class="fas fa-cog"></i></span>
    </header>

    <main class="msger-chat" id="msger-chat">
      {% for i in c %}
      {% if i.sender_type == 'Shop' %}
      <div class="msg right-msg">
        <div class="msg-img" style="background-image: url(/* seller img */);"></div>
        <div class="msg-bubble">
          <div class="msg-info">
            <div class="msg-info-time">{{ i.date_time }}</div>
          </div>
          <div class="msg-text">{{ i.message }}</div>
        </div>
      </div>
      {% elif i.sender_type == 'User' %}
      <div class="msg left-msg">
        <div class="msg-img" style="background-image: url(/* store img */);"></div>
        <div class="msg-bubble">
          <div class="msg-info">
            <div class="msg-info-time">{{ i.date_time }}</div>
          </div>
          <div class="msg-text">{{ i.message }}</div>
        </div>
      </div>
      {% endif %}
      {% endfor %}
    </main>
    <div class="form-section">
      <form action="" class="msger-input-area " method="POST" id="chat-form">
        <input type="text" class="msger-input" name="chat" placeholder="Enter your message..." required>
        <input type="submit" name="submit" class="msger-send-btn" value="Send">
      </form>
    </div>
  </div>

  <script>
    const chat = document.getElementById("msger-chat");
    window.onload = () => chat.scrollTop = chat.scrollHeight;
  </script>
</body>

</html>
{%include 'footer.html'%}
